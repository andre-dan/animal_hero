<%- model_class = Pet -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %>
    <%= link_to t('.new', :default => t("helpers.links.new")),
                new_pet_path,
                :class => 'btn btn-primary' %>
  </h1>
</div>
<div class="form-inline justify-center">
    <%= form_with url: search_pets_path, local: true, method: :get do |f| %>
      <%= f.text_field :q, class:"form-control mr-sm-2", type:"search", placeholder: 'Pesquisar ...' %>
      <%= f.submit 'Pesquisar', class:'btn btn-info' %>
    <% end %>
  </div>  
<% if @pets.empty?%>
  <h3> Nenhum Pet cadastrado ou encontrado.</h3>
<% end %>
<table class="table table-striped">
  <thead>
  <tr>
    <th><%= model_class.human_attribute_name(:name) %></th>
    <th><%= model_class.human_attribute_name(:species) %></th>
    <th><%= model_class.human_attribute_name(:birth_date) %></th>
    <th><%= model_class.human_attribute_name(:situation) %></th>
    <th><%= model_class.human_attribute_name(:avatar) %></th>
    <th style="width: 170px" ><%=t '.actions', :default => t("helpers.actions") %></th>
  </tr>
  </thead>
  <tbody>
  <% @pets.each do |pets| %>
    <tr>
      <td><%= pets.name %></td>
      <td><%= pets.species %></td>
      <td><%= pets.birth_date %></td>
      <td><%= pets.situation %></td>
      <td><%= image_tag pets.avatar.variant(resize_to_limit: [25, 25], format: :jpeg, sampling_factor: "4:2:0", strip: true, interlace: "JPEG", colorspace: "sRGB", quality: 80) if pets.avatar.attached? %></td>

      <td>
        <%= link_to content_tag(:i,'Mostrar'),
                    pet_path(pets), :class => 'btn btn-success btn-xs' %>
        <%= link_to content_tag(:i,'Editar', class: ["fas", "fa-edit"]),
                    edit_pet_path(pets), :class => 'btn btn-primary btn-xs' %>
        <%= link_to content_tag(:i,'Excluir', class: ["fas", "fa-trash"]),
                    pet_path(pets),
                    :method => :delete,
                    :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                    :class => 'btn btn-xs btn-danger' %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>